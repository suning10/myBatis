<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="org.LearnMyBatis.mapper.UserMapper" >

    <resultMap id="userResultMap" type="User">
        <result column="cur_position" property="curPosition"/>
    </resultMap>
<!--    <select id="selectUser" resultType="org.LearnMyBatis.pojo.User">-->
<!--    <select id="selectUser" resultType="User">-->
    <select id="selectUser" resultMap="userResultMap">
        select * from user
    </select>

    <select id="selectuserID" resultMap="userResultMap">
        select * from user where id = #{id};
    </select>

    <select id="selectByAgeUser" resultMap="userResultMap">
        select * from user where age &lt; #{age};
    </select>

    <select id="selectByConditionsParam" resultMap="userResultMap">

        select * from user where age &lt; #{age} and name = #{name};

    </select>

<!--    condition select by entity name-->
    <select id="selectByConditionsPOJO" resultMap="userResultMap">
        select * from user where age &lt; #{age} and name = #{name};
    </select>

    <select id="selectByConditionsPOJOIf" resultMap="userResultMap">
        select * from user
        <where>
            <if test="age !=null and age > 0 ">
                and age &lt; #{age}
            </if>

            <if test="name !=null and name !='' ">
                and name = #{name}
            </if>

            <if test="curPosition !=null and curPosition !='' ">
                and curPosition = #{curPosition}
            </if>

        </where>
    </select>

<!--    single condition, filter based on name or age or position -->
    <select id="selectSingleChoose" resultMap="userResultMap">
        select * from user
        where
        <choose>
            <when test="age !=null and age > 0 ">
                age &lt; #{age}
            </when>
            <when test="name !=null and name !=''">
                name = #{name}
            </when>
            <when test="curPosition !=null and curPosition !='' ">
                curPosition = #{curPosition}
            </when>
            <otherwise>
                1=1
            </otherwise>
        </choose>
    </select>
    <select id="selectSingleChooseWWhere" resultMap="userResultMap">
        select * from user
        <where>
            <choose>
                <when test="age !=null and age > 0 ">
                    age &lt; #{age}
                </when>
                <when test="name !=null and name !=''">
                    name = #{name}
                </when>
                <when test="curPosition !=null and curPosition !='' ">
                    curPosition = #{curPosition}
                </when>
            </choose>
        </where>
    </select>


</mapper>